enum LotteryStatus {
  Created
  Cancelled
  Closed
  Completed
}

type Lottery @entity {
  id: ID!
  status: LotteryStatus!
  tickets: [Ticket!]! @derivedFrom(field: "lottery")
  claimedPrizes: [ClaimedPrize!]! @derivedFrom(field: "lottery")
  refunds: [Refund!]! @derivedFrom(field: "lottery")
}

enum TicketTier {
  Member
  NonMember
}

type Ticket @entity {
  id: ID!
  lottery: Lottery!
  ticketNumber: Int!
  address: Bytes!
  tier: TicketTier!
}

type ClaimedPrize @entity {
  id: ID!
  lottery: Lottery!
  address: Bytes!
  prizeId: Int!
}

type Refund @entity {
  id: ID!
  lottery: Lottery!
  address: Bytes!
  amount: BigInt!
}

enum AuctionStatus {
  Created
  Settled
  Cancelled
}

type Auction @entity {
  id: ID! # auctionId
  status: AuctionStatus!
  bids: [Bid!]! @derivedFrom(field: "auction")
  highestBid: BigInt
  highestBidder: Bytes # address
  endTime: Int
}

type Bid @entity {
  id: ID! # tx id
  auction: Auction!
  bidder: Bytes! # address
  amount: BigInt!
  endTime: Int!
}