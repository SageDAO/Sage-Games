// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Crawler {
  id              Int           @id @default(autoincrement())
  name            String
  lastBlockNumber Int           @default(0)
  sales           NftSale[]
}

model Artist {
  id              Int           @id @default(autoincrement())
  displayName     String        @default("anon")
  wallets         Wallet[]
}

model Wallet {
  id              Int           @id @default(autoincrement())
  artistId        Int
  artist          Artist        @relation(fields: [artistId], references: [id])
  address         String
  ensName         String?
  sales           NftSale[]
}

model NftSale {
  id              Int           @id @default(autoincrement())
  crawlerId       Int
  txHash          String
  blockNumber     Int
  artistWalletId  Int
  marketplace     String
  contractAddress String
  tokenId         Int
  sellerAddress   String
  buyerAddress    String
  price           Float
  priceCurrency   String
  crawler         Crawler       @relation(fields: [crawlerId], references: [id])
  artistWallet    Wallet        @relation(fields: [artistWalletId], references: [id])
}
